
<script lang="ts" setup>

 const miniLinks = [
    { name: "About us", href: "#" },
    { name: "Press", href: "#" },
    { name: "Careers", href: "#" },
    { name: "Legal", href: "#" },
    { name: "Support", href: "#" },
    { name: "Contact", href: "#" },
    { name: "Sitemap", href: "#" },
    { name: "Cookie settings", href: "#" },
  ];
  const links = {
    products: {
      items: [
        {
          name: "Blog",
          description: "The latest industry news, updates and info.",
          icon: "lucide:book",
          href: "#",
        },
        {
          name: "About us",
          description: "The latest industry news, updates and info.",
          icon: "lucide:info",
          href: "#",
        },
        {
          name: "Video tutorials",
          description: "All the information you need to know about our platform.",
          icon: "lucide:play-circle",
          href: "#",
        },
        {
          name: "Customer stories",
          description: "See how our customers use our platform to grow their business.",
          icon: "lucide:sparkle",
          href: "#",
        },
        {
          name: "Help center",
          description: "Get all your questions answered in our help center.",
          icon: "lucide:life-buoy",
          href: "#",
        },
      ],
    },
    resources: {
      items: [
        {
          name: "About us",
          description: "The latest industry news, updates and info.",
          icon: "lucide:info",
          href: "#",
        },
        {
          name: "Customer stories",
          description: "See how our customers use our platform to grow their business.",
          icon: "lucide:sparkle",
          href: "#",
        },
        {
          name: "Video tutorials",
          description: "All the information you need to know about our platform.",
          icon: "lucide:play-circle",
          href: "#",
        },
        {
          name: "Help center",
          description: "Get all your questions answered in our help center.",
          icon: "lucide:life-buoy",
          href: "#",
        },
        {
          name: "Blog",
          description: "The latest industry news, updates and info.",
          icon: "lucide:book",
          href: "#",
        },
      ],
    },
  };

const isScrolled = ref(false)

// Fungsi untuk mendeteksi scroll
const handleScroll = () => {
  isScrolled.value = window.scrollY > 30
}

// Menambahkan event listener untuk scroll
onMounted(() => {
  window.addEventListener('scroll', handleScroll)
})

// Membersihkan event listener saat komponen dihapus
onUnmounted(() => {
  window.removeEventListener('scroll', handleScroll)
})

</script>

<template>
  <div
    class="sticky top-0 z-30"
    :class="isScrolled ? 'px-[1rem] top-1 md:px-0' : ''"
  >
    <div
      :class="[
        'p-6 text-sm items-center transition-all duration-300',
        isScrolled ? 'bg-gray-900 container px-3 rounded-full  m-[10px] shadow-md mx-auto' : 'bg-gray-900 border-b border-gray-800 w-full',
      ]"
    >
      <div class="container mx-auto flex flex-col max-h-screen">
        <div class="flex justify-between items-center w-full lg:px-1 gap-2">
          <NuxtLink
            class="flex items-center gap-2"
          >
            <Icon name="ph:rocket-launch-duotone" class="size-6 shrink-0" />
            <span class="font-semibold">HabitFuel</span>
          </NuxtLink>
           <UiNavigationMenu as="nav" class="hidden items-center justify-start gap-8 lg:flex">
          <UiNavigationMenuList class="gap-2">
            <UiNavigationMenuItem>
              <UiNavigationMenuLink as-child>
                <UiButton to="#" variant="ghost" size="sm"> Home</UiButton>
              </UiNavigationMenuLink>
            </UiNavigationMenuItem>
            <template v-for="(data, link, i) in links" :key="i">
              <UiNavigationMenuItem>
                <UiNavigationMenuTrigger class="h-9 px-3 text-sm capitalize" :title="link" />
                <UiNavigationMenuContent>
                  <div class="lg:w-[750px] xl:w-[1000px] bg-gray-800 rounded-lg">
                    <template v-for="(item, cat, index) in data" :key="`${cat}-${index}`">
                      <ul class="grid w-full grid-cols-2 flex-col gap-2 xl:grid-cols-3">
                        <li v-for="(child, k) in item" :key="k">
                          <UiNavigationMenuLink class="data-[active]:bg-muted/80" as-child>
                            <NuxtLink
                              :to="child.href"
                              class="flex flex-row gap-4 rounded-md p-3 transition hover:bg-muted/80 focus-visible:ring-2 focus-visible:ring-ring/50 focus-visible:outline-none dark:hover:bg-muted/20"
                            >
                              <div
                                class="inline-flex h-11 w-11 shrink-0 items-center justify-center rounded-lg border shadow-xs"
                              >
                                <Icon
                                  :name="child.icon"
                                  class="mt-px h-5 w-5 shrink-0 text-muted-foreground"
                                />
                              </div>
                              <div class="flex flex-col gap-1.5 leading-none">
                                <p class="text-sm font-semibold">{{ child.name }}</p>
                                <p
                                  class="text-sm text-muted-foreground"
                                  v-html="child.description"
                                />
                              </div>
                            </NuxtLink>
                          </UiNavigationMenuLink>
                        </li>
                      </ul>
                    </template>
                    <div
                      class="col-span-full flex items-center justify-center bg-muted/20 py-5 dark:bg-muted/5"
                    >
                      <NuxtLink class="font-semibold text-primary hover:underline" to="#"
                        >Looking for a new career? Get in touch!</NuxtLink
                      >
                    </div>
                  </div>
                </UiNavigationMenuContent>
              </UiNavigationMenuItem>
            </template>
            <UiNavigationMenuItem>
              <UiNavigationMenuLink as-child>
                <UiButton to="#" variant="ghost" size="sm">Pricing</UiButton>
              </UiNavigationMenuLink>
            </UiNavigationMenuItem>
          </UiNavigationMenuList>
          </UiNavigationMenu>
          <div class="lg:hidden">
              <UiSheet>
                <UiSheetTrigger as-child>
                  <UiButton variant="ghost" size="icon-sm">
                    <Icon name="lucide:menu" class="h-5 w-5" />
                  </UiButton>
                  <UiSheetContent class="w-[90%] p-0">
                    <template #content>
                      <UiSheetTitle class="sr-only" title="Mobile menu" />
                      <UiSheetDescription class="sr-only" description="Mobile menu" />
                      <UiSheetX class="z-20" />

                      <UiScrollArea class="h-full p-5">
                        <div class="flex flex-col gap-2">
                          <UiButton variant="ghost" class="justify-start text-base" to="#">Home</UiButton>
                          <template v-for="(data, link, i) in links" :key="i">
                            <UiCollapsible>
                              <UiCollapsibleTrigger as-child>
                                <UiButton
                                  variant="ghost"
                                  class="w-full justify-start text-base capitalize *:data-[state=open]:-rotate-180"
                                  to="#"
                                  >{{ link }}
                                  <Icon name="lucide:chevron-down" class="ml-auto size-4 transition"
                                /></UiButton>
                              </UiCollapsibleTrigger>
                              <UiCollapsibleContent
                                class="data-[state=closed]:animate-none data-[state=open]:p-3 data-[state=open]:pt-0"
                              >
                                <div
                                  v-for="(item, cat, index) in data"
                                  :key="`${cat}-${index}`"
                                  class="mt-5"
                                >
                                  <ul class="flex w-full flex-col gap-2">
                                    <li v-for="(child, k) in item" :key="k">
                                      <NuxtLink
                                        :to="child.href"
                                        class="flex flex-row gap-4 rounded-md py-3 transition hover:bg-muted/80 focus-visible:ring-2 focus-visible:ring-ring/50 focus-visible:outline-none"
                                      >
                                        <div
                                          class="inline-flex h-11 w-11 shrink-0 items-center justify-center rounded-lg border shadow-xs"
                                        >
                                          <Icon
                                            :name="child.icon"
                                            class="mt-px h-5 w-5 shrink-0 text-muted-foreground"
                                          />
                                        </div>
                                        <div class="flex flex-col gap-1.5 leading-none">
                                          <p class="text-sm font-semibold">{{ child.name }}</p>
                                          <p
                                            class="text-sm text-muted-foreground"
                                            v-html="child.description"
                                          />
                                        </div>
                                      </NuxtLink>
                                    </li>
                                  </ul>
                                </div>
                              </UiCollapsibleContent>
                            </UiCollapsible>
                          </template>
                          <UiButton variant="ghost" class="justify-start text-base" to="#"
                            >Pricing</UiButton
                          >

                          <UiGradientDivider class="my-5" />

                          <ul class="grid grid-cols-2 gap-x-3 gap-y-5 px-4">
                            <li v-for="(m, j) in miniLinks" :key="j">
                              <NuxtLink class="py-2" :to="m.href">{{ m.name }}</NuxtLink>
                            </li>
                          </ul>
                          <UiGradientDivider class="my-5" />
                          <UiButton to="#">Sign up</UiButton>
                          <UiButton variant="outline" to="#">Log in</UiButton>
                        </div>
                      </UiScrollArea>
                    </template>
                  </UiSheetContent>
                </UiSheetTrigger>
              </UiSheet>
            </div>
            <div class="hidden items-center gap-3 lg:flex">
              <UiButton to="/login" variant="ghost" size="sm">Log in</UiButton>
              <UiButton to="/signup" size="sm">Sign up</UiButton>
            </div>
        </div>
      </div>
    </div>
  </div>
</template>
